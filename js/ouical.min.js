(function (e) {
    var t = 60 * 1e3;
    var n = function (e) {
        return e.toISOString().replace(/-|:|\.\d+/g, "");
    };
    var r = function (e) {
        return e.end ? n(e.end) : n(new Date(e.start.getTime() + e.duration * t));
    };
    var i = {
        google: function (e) {
            var t = n(e.start);
            var i = r(e);
            var s = encodeURI(
                [
                    "https://www.google.com/calendar/render",
                    "?action=TEMPLATE",
                    "&text=" + (e.title || ""),
                    "&dates=" + (t || ""),
                    "/" + (i || ""),
                    "&details=" + (e.description || ""),
                    "&location=" + (e.address || ""),
                    "&sprop=&sprop=name:",
                ].join("")
            );
            return '<a class="icon-google" target="_blank" href="' + s + '">Google<img class = "cal-img google" src = "img/google.png"></a>';
        },
        ics: function (e, t, i) {
            var s = n(e.start);
            var o = r(e);
            var u = encodeURI(
                "data:text/calendar;charset=utf8," +
                    [
                        "BEGIN:VCALENDAR",
                        "VERSION:2.0",
                        "BEGIN:VEVENT",
                        "URL:" + document.URL,
                        "DTSTART:" + (s || ""),
                        "DTEND:" + (o || ""),
                        "SUMMARY:" + (e.title || ""),
                        "DESCRIPTION:" + (e.description || ""),
                        "LOCATION:" + (e.address || ""),
                        "END:VEVENT",
                        "END:VCALENDAR",
                    ].join("\n")
            );
            slug = i.toLowerCase();
            return '<a class="' + t + '" target="_blank" href="' + u + '">' + i + '<img class = "cal-img ' + slug +'" src = "img/' + slug + '.png">' + "</a>";
        },
        ical: function (e) {
            return this.ics(e, "icon-ical", "iCal");
        },
        outlook: function (e) {
            return this.ics(e, "icon-outlook", "Outlook");
        },
    };
    var s = function (e) {
        return { google: i.google(e), ical: i.ical(e), outlook: i.outlook(e) };
    };
    var o = function (e) {
        return e.data !== undefined && e.data.start !== undefined && (e.data.end !== undefined || e.data.duration !== undefined);
    };
    var u = function (e, t, n) {
        var r = document.createElement("div");
        r.innerHTML = '<label for="checkbox-for-' + n + '" class="add-to-calendar-checkbox">Add to my Calendar</label>';
        Object.keys(e).forEach(function (t) {
            r.innerHTML += e[t];
        });
        r.className = "add-to-calendar";
        if (t !== undefined) {
            r.className += " " + t;
        }
        r.id = n;
        return r;
    };
    var a = function (e) {
        if (e.options && e.options.class) {
            return e.options.class;
        }
    };
    var f = function (e) {
        return e.options && e.options.id ? e.options.id : Math.floor(Math.random() * 1e6);
    };
    e.createCalendar = function (e) {
        if (!o(e)) {
            console.log("Event details missing.");
            return;
        }
        return u(s(e.data), a(e), f(e));
    };
})(this);
